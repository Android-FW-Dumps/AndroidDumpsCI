name: Dump
 
on:
  push:
    branches: [ main ]

env:
  ROM_URL: https://oxygenos.oneplus.net/OnePlusN10Oxygen_14.E.09_OTA_009_all_2101021731_9c32820c43e443f1.zip
  TZ: America/Sao_Paulo

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
       - name: Checkouts
         uses: actions/checkout@master

       - name: Setup Dump Environment
         run: |
              sudo apt install unace unrar zip unzip p7zip-full p7zip-rar sharutils rar uudeview mpack arj cabextract file-roller device-tree-compiler liblzma-dev python3-pip brotli liblz4-tool axel gawk aria2 detox cpio rename
              pip3 install backports.lzma protobuf pycrypto docopt zstandard twrpdtgen

       - name: Running Dumpyara Shell Script
         run: |
              bash ~/.github/workflows/dumpyara.sh "$ROM_URL"
              ls -la
              cd "$PROJECT_DIR"/working/
              ls -la